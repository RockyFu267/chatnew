# chatnew
A simple chat room

## 目录结构
+ server端: 主目录/chatserver;启动命令:`go run main.go`;端口默认18000;
+ client端: client的三个目录除了连接的server地址配置不一样其他都一样；如果没有go环境,推荐直接使用根目录已编译好的客户端(压缩包里的是windows可执行文件)

## 使用说明
+ 打开客户端或者使用linux服务器telnet访问59.110.162.166的18000端口(windows需要使用client打开,telnet会出现乱码)
+ 登录会提示先注册昵称；昵称注册命令myname
+ 命令提示输入help(游戏房间内没有命令提示)

## 实现的功能列表
### 客户端请求
#### 准入判断
+ 连接数上限：超过一定连接数(目前是20),不允许客户端建立tcp连接
+ 昵称校验：检查合法性-长度&特殊字符(长度小于20大于1),不能重复
#### 超时断开
+ 活跃校验：超过一定时间无活跃行为(目前是5分钟),将自动断开tcp连接
+ 信息更新：在用户、房间列表中删除该连接相关的信息
#### 客户端主动断开连接
+ 信息更新：在用户、房间列表中删除该连接相关的信息
### 公共聊天室
#### 广播默认规则
+ 接收成员检查：只对在公共聊天室内的用户发送消息(存在退出public聊天,但是没断开连接且活跃的的用户)
+ 发送成员检查：不允许已经退出公共聊天(仅退出public聊天,但是没断开连接且活跃的的用户)发送消息，提示需要先加入“public”房间
#### 用户退出/加入
+ 用户注册昵称后默认加入公共聊天室
+ 支持用户退出公共聊天室(只是退出public,不接收公共聊天内容,也不能发送内容至公共聊天)
+ 支持用户重新加入公共聊天
### 私密聊天室
#### 私密广播默认规则
+ 接收成员检查：只对在私密聊天室的用户发送消息(存在退出该私密聊天室,但是还活跃的的用户)
+ 发送成员检查：不允许已经退出私密聊天室(存在退出该私密聊天室,但是还活跃的的用户)或还没加入聊天室的用户向私密聊天室发送消息，提示需要先加入该房间
#### 创建私密聊天室
+ 房间名称校验：检查合法性-长度&特殊字符(长度小于20大于1),不能重复
+ 房间密码校验：检查合法性-长度&特殊字符(长度小于20大于1)
#### 用户退出/加入
+ 支持用户退出私密聊天室(只是退出该私密聊天室,不接收私密该聊天室内容,也不能发送内容至该私密聊天室)
+ 支持用户新加入或重新加入公共聊天
+ 人数上限：超过一定连接数(目前是10),不允许用户加入
+ 加入密码校验：密码不对不允许进入房间--备注：之后可加入尝试频率检查，防止暴力破解
### 1v1私聊
+ 1对1的私聊需要先加好友

